#1.  介绍

   在传统的客户端-服务器鉴权模型当中，当客户端请求访问服务器上有访问限制的资源时(受保护的资源)，
   服务器端需要客户端提供该资源拥有者的密码文件做鉴权。 为了让第三方应用程序能访问受限制的资源，
   资源拥有者需要把自己的密码文件分享给他们。 这将导致一些问题和限制：
   
   - 第三方应用程序需要存储资源拥有者的密码文件以在后面使用，典型的情况是明文格式的密码。
   - 要求服务器端支持密码鉴权，即使密码本身就存在安全缺陷。
   - 第三方应用程序得到了资源拥有者受保护的资源的过度宽松的访问权限，导致资源拥有无法去限制他的访问期限和限制资源的访问范围。
   - 资源拥有者不能单独吊销某个第三方的访问权限。除非他修改第三方所使用的密码，但这会导致所有的第三方的访问权限失效。
   - 只要任何一个第三方应用程序泄密了，就会导致终端用户的密码泄密，该密码所保护的所有资源都将泄密。

   OAuth 通过在客户端和资源拥有者之间加入了授权层这一角色来将他们分开，解决了这些问题。
   在 OAuth 中，客户端要请求访问的资源， 受资源拥有者所控制，保存在资源服务器上面。 
   并且颁发一组密码证书，这些证书不同于资源拥有者的密码证书。

   不采用资源拥有者的证书去访问受限制的资源， 客户端获取一种访问令牌(access token),用特定的访问范围(scope)，访问周期(lifecycle)，和其他的访问属性所(access atrributes)组成的一个字符串。在资源拥有者的批准下，资源服务器将访问凭证发布给第三方客户端。客户端使用这个访问凭证去访问资源服务器上面保存的受保护的资源。

   例如，一个终端用户（资源拥有者）能够授权一台打印服务（客户端）访问用户存储在照片共享服务（资源服务器）上受保护的照片，而不需用户要告诉打印服务自己的用户名和密码。 而是， 他直接在这个信任这个照片打印服务的授权服务器上面去鉴权，然后发布给打印服务一个委托的特定凭证（access token）。

   本规范设计使用的是 HTTP 协议， OAuth 使用 HTTP 之外的其他任何协议都超出了讨论的范畴。

   OAuth 1.0 协议（RFC5849）,发布成信息文档，是一个社区共同努力的结果。 本规范在基于 OAuth 1.0 开发经验的基础上， 以及附加的用例场景和从 IETF 组织广泛的需求。 OAuth 2.0 协议并不向后兼容 OAuth 1.0 协议。 这两个版本可以在网路中共存， 实现的时候可能选择两种都支持。 然而，这个规范的目的是新的实现支持本文档定义的 OAuth 2.0 协议，OAuth 1.0 只支持现有的部署。 OAuth 2.0 协议 和 OAuth 1.0 协议之间只有很少的实现方式相同。 本文方法假设实现人员不熟悉 OAuth 1.0 的结构和细节。
## 1.1.  角色
   OAuth 定义了四种角色：

   资源拥有者(resource owner)<br>
   一个实体，能够授权访问受保护的资源。当资源拥有者是一个人时，他被当成一个终端用户(client-user)。

   资源服务器(resource server)<br>
   服务器保存着受保护的资源，有能力接收和响应利用访问凭证请求受保护的资源。

   客户端(client)<br>
   一个应用程序，在获得资源拥有者授权之后，代表资源拥有者的行为，想受保护的资源发起请求。 术语客户端（"client"）并不涉及任何特定的实现细节(例如：不管是执行在服务器上面的应用程序，桌面应用程序，或者其他设备)。

   授权服务器(authorization server)<br>
   在客户端经过了资源拥有者的成功鉴权和和获取授权之后，这台服务器发布访问令牌给客户端。

   授权服务器和资源服务器之间的交互超出了本规范的讨论范畴。 授权服务器和资源服务器可能是同一台，或者是分开的实体。一台单独的授权服务器可以发布访问令牌，支持多台资源服务器访问。

## 1.2.  协议流

     +--------+                               +---------------+
     |        |--(A)- Authorization Request ->|   Resource    |
     |        |                               |     Owner     |
     |        |<-(B)-- Authorization Grant ---|               |
     |        |                               +---------------+
     |        |
     |        |                               +---------------+
     |        |--(C)-- Authorization Grant -->| Authorization |
     | Client |                               |     Server    |
     |        |<-(D)----- Access Token -------|               |
     |        |                               +---------------+
     |        |
     |        |                               +---------------+
     |        |--(E)----- Access Token ------>|    Resource   |
     |        |                               |     Server    |
     |        |<-(F)--- Protected Resource ---|               |
     +--------+                               +---------------+

                     Figure 1: Abstract Protocol Flow

  
 
   图 1 是抽象 OAuth 2.0 流程，描述了这四个角色之间彼此的交互，包含以下步骤：

   (A)  客户端向资源拥有者发起授权请求。 这个授权请求可以直接发给资源拥有者(如图显示的那样)， 或者间接地以授权服务器为中间件发给资源拥有者。

   (B)  客户端收到一个授权许可， 他是一个证书，代表着资源拥有者的授权， 用本文档第一的四种授权类型来表示或者使用一种扩展的许可类型。这个授权许可类型依赖于客户端请求授权的方法和授权服务器支持的类型。

   (C) 客户端向授权服务器发起请求，出具授权许可，通过授权服务器的鉴定后获得访问令牌。

   (D)  授权服务器鉴定客户端，验证授权许可，如果有效，发布一个访问令牌。

   (E)  客户端向资源服务器发送请求访问受保护的资源，通过出具访问令牌进行鉴权。

   (F)  资源服务器验证这个访问令牌，如果有效，接收这个请求。

   相比客户端在资源服务器上获取授权许可(在步骤A和B中描述)，更好的方法是使用授权服务器充当中间媒介，这将在4.1章节的图3中阐述。

